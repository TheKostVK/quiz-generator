import{B as l,H as y,g as h}from"./storage-CetQ6teo.js";class f{template=null;constructor(){const e=document.getElementById("quiz-card");if(!e)throw new Error("QuizCard: cardTemplate is required");this.template=e}getNodeElement({id:e,title:n,description:o,questions:t}){if(!this.template)throw new Error("Template #quiz-card-template not found");if(!e)throw new Error("QuizCard: id is required");if(!n)throw new Error("QuizCard: title is required");if(!Array.isArray(t))throw new Error("QuizCard: questions must be array");const a=t.length,u=this.template.content.cloneNode(!0),c=u.querySelector(".quiz-card"),m=c.querySelector(".quiz-card__title"),z=c.querySelector(".quiz-card__description"),q=c.querySelector(".quiz-card__questions-count"),p=c.querySelector(".quiz-card__action");return m.textContent=n,z.textContent=o,q.textContent=`${a} вопросов`,p.href=`${l}quiz.html?id=${encodeURIComponent(e)}`,u}}const i=document.querySelector(".quizzes"),d=document.getElementById("quizzes-list"),s=document.getElementById("quizzes-empty");if(!i)throw new Error("quizzesSection: .quizzes not found");if(!d)throw new Error("Template #quizzes-list not found");if(!s)throw new Error("Template #quizzes-empty not found");const w=new y,E=new f;w.setMenuItems([{text:"Добавить квиз",href:`${l}index.html`,variant:"primary"}]);const _=async()=>{try{const r=await h();if(i.replaceChildren(),!Array.isArray(r)||r.length===0){const t=s.content.cloneNode(!0);i.append(t);return}const e=d.content.cloneNode(!0),n=e.querySelector(".quizzes__content"),o=document.createDocumentFragment();r.forEach(t=>{const a=E.getNodeElement(t);o.append(a)}),n.append(o),i.append(e)}catch(r){i.replaceChildren();const e=s.content.cloneNode(!0),n=e.querySelector(".quizzes__empty-title"),o=e.querySelector(".quizzes__empty-subtitle"),t=e.querySelector(".quizzes__empty-action");n&&(n.textContent=r instanceof Error?r.message:"Ошибка загрузки квизов"),o?.remove(),t?.remove(),i.append(e)}};await _();
