(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();class k{#t;#e;#n;constructor(e={}){const{containerSelector:n=".header",navSelector:r=".header__nav",burgerSelector:s=".header__burger"}=e;if(this.#t=document.querySelector(n),this.#e=document.querySelector(r),this.#n=document.querySelector(s),!this.#t)throw new Error("Header: .header not found");if(!this.#e)throw new Error("Header: .header__nav not found");this.#n&&this.#n.addEventListener("click",()=>{this.#t.classList.toggle("header--menu-open"),this.#e.classList.toggle("header--menu-mobile")}),this.#e.addEventListener("click",o=>{o.target.closest("a")&&(this.#t.classList.remove("header--menu-open"),this.#e.classList.remove("header--menu-mobile"))})}setMenuItems(e){this.#e&&(this.#e.replaceChildren(),e.forEach(n=>{const r=document.createElement("a");r.href=n.href,r.textContent=n.text,n.variant?r.className=`btn btn--${n.variant} header__nav-item`:r.className="header__link",n.ariaLabel&&r.setAttribute("aria-label",n.ariaLabel),n.isActive&&r.classList.add("header__link--active"),this.#e.append(r)}))}}const A="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let x=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=A[n[t]&63];return e};const y=(t,e)=>e.some(n=>t instanceof n);let B,L;function C(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O(){return L||(L=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b=new WeakMap,h=new WeakMap,f=new WeakMap;function z(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(d(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return f.set(e,t),e}function _(t){if(b.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});b.set(t,e)}let g={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return b.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function M(t){g=t(g)}function N(t){return O().includes(t)?function(...e){return t.apply(w(this),e),d(this.request)}:function(...e){return d(t.apply(w(this),e))}}function V(t){return typeof t=="function"?N(t):(t instanceof IDBTransaction&&_(t),y(t,C())?new Proxy(t,g):t)}function d(t){if(t instanceof IDBRequest)return z(t);if(h.has(t))return h.get(t);const e=V(t);return e!==t&&(h.set(t,e),f.set(e,t)),e}const w=t=>f.get(t);function j(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),a=d(i);return r&&i.addEventListener("upgradeneeded",c=>{r(d(i.result),c.oldVersion,c.newVersion,d(i.transaction),c)}),n&&i.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const T=["get","getKey","getAll","getAllKeys","count"],q=["put","add","delete","clear"],m=new Map;function E(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(m.get(e))return m.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=q.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||T.includes(n)))return;const o=async function(i,...a){const c=this.transaction(i,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return m.set(e,o),o}M(t=>({...t,get:(e,n,r)=>E(e,n)||t.get(e,n,r),has:(e,n)=>!!E(e,n)||t.has(e,n)}));const F=["continue","continuePrimaryKey","advance"],P={},D=new WeakMap,S=new WeakMap,W={get(t,e){if(!F.includes(e))return t[e];let n=P[e];return n||(n=P[e]=function(...r){D.set(this,S.get(this)[e](...r))}),n}};async function*K(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,W);for(S.set(n,e),f.set(n,w(e));e;)yield n,e=await(D.get(n)||e.continue()),D.delete(n)}function v(t,e){return e===Symbol.asyncIterator&&y(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&y(t,[IDBIndex,IDBObjectStore])}M(t=>({...t,get(e,n,r){return v(e,n)?K:t.get(e,n,r)},has(e,n){return v(e,n)||t.has(e,n)}}));class I{#t=null;constructor(e){this.#t=e}static async open(e,n,r){if(!("indexedDB"in window))throw new Error("IndexedDB не поддерживается браузером");const s=await j(e,n,{upgrade(o,i,a){r&&r(o,i,a)}});return new I(s)}get(e,n){return this.#e(),this.#t.get(e,n)}getAll(e){return this.#e(),this.#t.getAll(e)}put(e,n,r){return this.#e(),r!==void 0?this.#t.put(e,n,r):this.#t.put(e,n)}delete(e,n){return this.#e(),this.#t.delete(e,n)}clear(e){return this.#e(),this.#t.clear(e)}#e(){if(!this.#t)throw new Error("База данных не инициализирована")}}const Q="/quiz-generator/",R=1,H="quizzesDB",l="quizzes",p=I.open(H,R,t=>{t.objectStoreNames.contains(l)||t.createObjectStore(l,{keyPath:"id"})});async function U(t){return(await p).put(l,{id:x(),...t})}async function $(t){return(await p).get(l,t)}async function G(){return(await p).getAll(l)}export{Q as B,k as H,$ as a,G as g,x as n,U as s};
